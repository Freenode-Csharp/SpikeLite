<?xml version="1.0" encoding="utf-8" ?>

<!--
  SpikeLite C# IRC Bot
  Copyright (c) 2008 FreeNode ##Csharp Community

  This source is licensed under the terms of the MIT license. Please see the 
  distributed license.txt for details.
-->

<!-- 
  This file governs our log4net logging. We're set up to rehash our repository on changes to this file. Our current
  logging setup is that INFO+ messages get put into our spikelite.log with a rather standard format, and that
  debug level logs show up on STDOUT. I tried to set up 2 colorized appenders for STDOUT, one for raw send and one
  for raw receive, but the filters didn't seem to work on string pattern matching.
  
  Our default level of logging is INFO, so you'll want to override any non-default values here, which should
  propagate without a restart. You'll probably want to add another appender.
-->
<log4net>
  
  <!-- INFO level logs and greater go out to spikelite.log. -->
  <appender name="DefaultFileBasedLogger" type="log4net.Appender.FileAppender">
    <file value="spikelite.log" />
    <appendToFile value="false" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%date %-5level %logger - %message%newline" />
    </layout>
    <filter type="log4net.Filter.LevelRangeFilter">
      <levelMin value="INFO" />
      <levelMax value="ERROR" />
    </filter>
  </appender>

  <!-- A file-based logger for modules. -->
  <appender name="ModuleFileBasedLogger" type="log4net.Appender.FileAppender">
    <file value="spikelite-modules.log" />
    <appendToFile value="false" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%date %-5level %logger - %message%newline" />
    </layout>
  </appender>

  <!-- DEBUG level logs show up in STDOUT, uncolorized.  -->
  <appender name="PlainConsoleAppender" type="log4net.Appender.ConsoleAppender">
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
    </layout>
    <filter type="log4net.Filter.LevelRangeFilter">
      <levelMin value="DEBUG" />
      <levelMax value="DEBUG" />
    </filter>
  </appender>

  <!-- We've overriden the default WARN with INFO. For DEBUG level you should add another appender, or
         alter this node. -->
  <root>
    <level value="INFO" />
    <appender-ref ref="DefaultFileBasedLogger" />
    <appender-ref ref="PlainConsoleAppender"/>
  </root>

  <!-- Set SpikeLite.SpikeLite to log to both console and file based appenders. Our debug info will wind up
         on our console though. -->
  <logger name="SpikeLite.SpikeLite">
    <level value="DEBUG" />
  </logger>

  <logger name="NHibernate">
    <level value="WARN" />
  </logger>

  <!-- Shove stuff from our modules and module manager into here.-->
  <logger name="SpikeLite.Modules.ModuleManager">
    <level value="DEBUG" />
    <appender-ref ref="ModuleFileBasedLogger" />
  </logger>
</log4net>